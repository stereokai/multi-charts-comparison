import{g as A,c as a,G as y}from"./echarts.renderer.9164c6f0.js";import{l as t}from"./vendor.285b38b1.js";function k(e=new Date){return e.setDate(e.getDate()-1),e.setHours(22)}const w={channels:{label:"Channels",min:10,max:25,value:10},period:{label:"Sleep period (h)",min:8,max:14,value:8},samples:{label:"Samples per second",min:1,max:100,value:1},total:{label:"Total samples"},lastEvent:{label:"Last event"}};let i=[],c,m,d,f;const E=0,g=()=>i[i.length-1];let p=null,x=!1;const S=A();function L(...e){S.on(...e)}const b=()=>{const e=g().xAxis.getHeight(),o=(c.engine.container.clientHeight-e)/i.length;for(let n=0;n<w.channels.max;n++)n<i.length?c.setRowHeight(n,Math.round(o)):c.setRowHeight(n,1e-5);c.setRowHeight(g().row,Math.round(o+e))};function F(e){p={timestamp:performance.now()},c=t.lightningChart({overrideInteractionMouseButtons:{chartXYPanMouseButton:0,chartXYRectangleZoomFitMouseButton:2}}).Dashboard({container:e,numberOfColumns:1,numberOfRows:w.channels.max,theme:t.Themes.lightNew}).setBackgroundFillStyle(new t.SolidFill({color:t.ColorCSS("white")})).setSplitterStyle(t.emptyLine).setSplitterStyleHighlight(t.emptyLine),i=a.map((o,n)=>T(c,o,n)),M(e)}function C(e=[],o){x&&(p={timestamp:performance.now()});const n=i.length;e.forEach((s,r)=>{let h=i[r],l=r;a.length!==n&&(l=n+r,i.push(T(c,a[l],l)),h=i[l]),h.series.clear(),h.series.addArraysXY(o,s.data),a[l].min=s.min,a[l].max=s.max}),i.splice(a.length,i.length-a.length).forEach(s=>{s.chart.dispose()}),o&&H(o),f&&f.remove(),f=t.synchronizeAxisIntervals(...i.map(s=>s.xAxis)),g().xAxis.setInterval(m,d,!1,!0),requestAnimationFrame(b),I(),window.dashboard=c,window.graphs=i}function H(e){i.forEach((o,n)=>{o.xAxis.setTickStrategy(t.AxisTickStrategies.Empty)}),g().xAxis.setTickStrategy(t.AxisTickStrategies.DateTime,o=>o.setDateOrigin(new Date(k())).setMajorTickStyle(n=>n.setGridStrokeStyle(t.emptyLine)).setMinorTickStyle(n=>n.setGridStrokeStyle(t.emptyLine))),e&&(m=e[0],d=e[e.length-1])}function T(e,o,n){const s=e.createChartXY({columnIndex:0,rowIndex:n,columnSpan:1,rowSpan:1,disableAnimations:!0}).setTitle("").setPadding({left:100,top:0,bottom:0}).setBackgroundStrokeStyle(t.emptyLine).setMouseInteractionPan(!0).setSeriesBackgroundFillStyle(new t.SolidFill({color:t.ColorCSS("white")})),r=s.getDefaultAxisX().setTickStrategy(t.AxisTickStrategies.Empty,u=>console.log(u)).setStrokeStyle(t.emptyLine),h=s.getDefaultAxisY().setMouseInteractions(!1).setChartInteractions(!1).setStrokeStyle(t.emptyLine).setTitle(o.name).setTitleFont(new t.FontSettings({size:12})).setTitleFillStyle(new t.SolidFill({color:t.ColorHEX("#6e7079")})).setTitleRotation(0).setThickness(60).setAnimationZoom(void 0).setTickStrategy(t.AxisTickStrategies.Numeric,u=>u.setMajorTickStyle(v=>v.setLabelFillStyle(new t.SolidFill({color:t.ColorHEX("#6e7079")})).setLabelFont(new t.FontSettings({size:8})).setTickStyle(!1))),l=s.addLineSeries({dataPattern:{pattern:"ProgressiveX",regularProgressiveStep:!0,allowDataGrouping:!0},automaticColorIndex:n}).setStrokeStyle(u=>u.setThickness(-1));return{chart:s,series:l,xAxis:r,yAxis:h,row:n}}function M(e){i[0].xAxis.onScaleChange((o,n)=>{(o<m||n>d)&&requestAnimationFrame(()=>{i.forEach(s=>s.chart.setMouseInteractionWheelZoom(!1)),g().xAxis.setInterval(m,d,!1,!0),setTimeout(()=>{i.forEach(s=>s.chart.setMouseInteractionWheelZoom(!0))},1e3)}),i.forEach((s,r)=>{s.yAxis.setInterval(a[r].min,a[r].max)})}),e.addEventListener("wheel",o=>{o.preventDefault()},{passive:!1})}function I(){requestAnimationFrame(()=>{const e=(performance.now()-p.timestamp)/1e3;x?S.render({duration:e,type:y.render}):(x=!0,S.init({duration:e,type:y.init})),p=null})}function D(){}function X(){}var P=Object.freeze(Object.defineProperty({__proto__:null,baseDate:E,graphEvents:S,on:L,init:F,update:C,showLoading:D,hideLoading:X},Symbol.toStringTag,{value:"Module"}));export{P as L,k as g,w as u};
