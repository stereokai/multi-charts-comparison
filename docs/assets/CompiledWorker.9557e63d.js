/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 6.2.0
 * @date    2022-01-15
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */(function(r,n){typeof exports=="object"&&typeof module=="object"?module.exports=n():typeof define=="function"&&define.amd?define("workerpool",[],n):typeof exports=="object"?exports.workerpool=n():r.workerpool=n()})(typeof self<"u"?self:this,function(){return function(){var __webpack_modules__={345:function(e,r,n){var u=n(219),k=n(751),d=n(828),m=n(833),l=new m;function p(o,i){typeof o=="string"?this.script=o||null:(this.script=null,i=o),this.workers=[],this.tasks=[],i=i||{},this.forkArgs=Object.freeze(i.forkArgs||[]),this.forkOpts=Object.freeze(i.forkOpts||{}),this.debugPortStart=i.debugPortStart||43210,this.nodeWorker=i.nodeWorker,this.workerType=i.workerType||i.nodeWorker||"auto",this.maxQueueSize=i.maxQueueSize||1/0,this.onCreateWorker=i.onCreateWorker||function(){return null},this.onTerminateWorker=i.onTerminateWorker||function(){return null},i&&"maxWorkers"in i?(_(i.maxWorkers),this.maxWorkers=i.maxWorkers):this.maxWorkers=Math.max((d.cpus||4)-1,1),i&&"minWorkers"in i&&(i.minWorkers==="max"?this.minWorkers=this.maxWorkers:(x(i.minWorkers),this.minWorkers=i.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&k.ensureWorkerThreads()}p.prototype.exec=function(o,i,a){if(i&&!Array.isArray(i))throw new TypeError('Array expected as argument "params"');if(typeof o=="string"){var f=u.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var v=this.tasks,y={method:o,params:i,resolver:f,timeout:null,options:a};v.push(y);var W=f.promise.timeout;return f.promise.timeout=function(M){return v.indexOf(y)!==-1?(y.timeout=M,f.promise):W.call(f.promise,M)},this._next(),f.promise}else{if(typeof o=="function")return this.exec("run",[String(o),i]);throw new TypeError('Function or string expected as argument "method"')}},p.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var o=this;return this.exec("methods").then(function(i){var a={};return i.forEach(function(f){a[f]=function(){return o.exec(f,Array.prototype.slice.call(arguments))}}),a})},p.prototype._next=function(){if(this.tasks.length>0){var o=this._getWorker();if(o){var i=this,a=this.tasks.shift();if(a.resolver.promise.pending){var f=o.exec(a.method,a.params,a.resolver,a.options).then(i._boundNext).catch(function(){if(o.terminated)return i._removeWorker(o)}).then(function(){i._next()});typeof a.timeout=="number"&&f.timeout(a.timeout)}else i._next()}}},p.prototype._getWorker=function(){for(var o=this.workers,i=0;i<o.length;i++){var a=o[i];if(a.busy()===!1)return a}return o.length<this.maxWorkers?(a=this._createWorkerHandler(),o.push(a),a):null},p.prototype._removeWorker=function(o){var i=this;return l.releasePort(o.debugPort),this._removeWorkerFromList(o),this._ensureMinWorkers(),new u(function(a,f){o.terminate(!1,function(v){i.onTerminateWorker({forkArgs:o.forkArgs,forkOpts:o.forkOpts,script:o.script}),v?f(v):a(o)})})},p.prototype._removeWorkerFromList=function(o){var i=this.workers.indexOf(o);i!==-1&&this.workers.splice(i,1)},p.prototype.terminate=function(o,i){var a=this;this.tasks.forEach(function(O){O.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var f=function(M){this._removeWorkerFromList(M)},v=f.bind(this),y=[],W=this.workers.slice();return W.forEach(function(O){var M=O.terminateAndNotify(o,i).then(v).always(function(){a.onTerminateWorker({forkArgs:O.forkArgs,forkOpts:O.forkOpts,script:O.script})});y.push(M)}),u.all(y)},p.prototype.stats=function(){var o=this.workers.length,i=this.workers.filter(function(a){return a.busy()}).length;return{totalWorkers:o,busyWorkers:i,idleWorkers:o-i,pendingTasks:this.tasks.length,activeTasks:i}},p.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var o=this.workers.length;o<this.minWorkers;o++)this.workers.push(this._createWorkerHandler())},p.prototype._createWorkerHandler=function(){var o=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new k(o.script||this.script,{forkArgs:o.forkArgs||this.forkArgs,forkOpts:o.forkOpts||this.forkOpts,debugPort:l.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType})};function _(o){if(!A(o)||!g(o)||o<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function x(o){if(!A(o)||!g(o)||o<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function A(o){return typeof o=="number"}function g(o){return Math.round(o)==o}e.exports=p},219:function(e){"use strict";function r(d,m){var l=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(typeof d!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var p=[],_=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var x=function(i,a){p.push(i),_.push(a)};this.then=function(o,i){return new r(function(a,f){var v=o?n(o,a,f):a,y=i?n(i,a,f):f;x(v,y)},l)};var A=function(i){return l.resolved=!0,l.rejected=!1,l.pending=!1,p.forEach(function(a){a(i)}),x=function(f,v){f(i)},A=g=function(){},l},g=function(i){return l.resolved=!1,l.rejected=!0,l.pending=!1,_.forEach(function(a){a(i)}),x=function(f,v){v(i)},A=g=function(){},l};this.cancel=function(){return m?m.cancel():g(new u),l},this.timeout=function(o){if(m)m.timeout(o);else{var i=setTimeout(function(){g(new k("Promise timed out after "+o+" ms"))},o);l.always(function(){clearTimeout(i)})}return l},d(function(o){A(o)},function(o){g(o)})}function n(d,m,l){return function(p){try{var _=d(p);_&&typeof _.then=="function"&&typeof _.catch=="function"?_.then(m,l):m(_)}catch(x){l(x)}}}r.prototype.catch=function(d){return this.then(null,d)},r.prototype.always=function(d){return this.then(d,d)},r.all=function(d){return new r(function(m,l){var p=d.length,_=[];p?d.forEach(function(x,A){x.then(function(g){_[A]=g,p--,p==0&&m(_)},function(g){p=0,l(g)})}):m(_)})},r.defer=function(){var d={};return d.promise=new r(function(m,l){d.resolve=m,d.reject=l}),d};function u(d){this.message=d||"promise cancelled",this.stack=new Error().stack}u.prototype=new Error,u.prototype.constructor=Error,u.prototype.name="CancellationError",r.CancellationError=u;function k(d){this.message=d||"timeout exceeded",this.stack=new Error().stack}k.prototype=new Error,k.prototype.constructor=Error,k.prototype.name="TimeoutError",r.TimeoutError=k,e.exports=r},751:function(e,r,n){"use strict";function u(s,c){var t=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!t){if(Array.isArray(s)||(t=k(s))||c&&s&&typeof s.length=="number"){t&&(s=t);var h=0,b=function(){};return{s:b,n:function(){return h>=s.length?{done:!0}:{done:!1,value:s[h++]}},e:function(T){throw T},f:b}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var S=!0,P=!1,w;return{s:function(){t=t.call(s)},n:function(){var T=t.next();return S=T.done,T},e:function(T){P=!0,w=T},f:function(){try{!S&&t.return!=null&&t.return()}finally{if(P)throw w}}}}function k(s,c){if(!!s){if(typeof s=="string")return d(s,c);var t=Object.prototype.toString.call(s).slice(8,-1);if(t==="Object"&&s.constructor&&(t=s.constructor.name),t==="Map"||t==="Set")return Array.from(s);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return d(s,c)}}function d(s,c){(c==null||c>s.length)&&(c=s.length);for(var t=0,h=new Array(c);t<c;t++)h[t]=s[t];return h}function m(s){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(c){return typeof c}:function(c){return c&&typeof Symbol=="function"&&c.constructor===Symbol&&c!==Symbol.prototype?"symbol":typeof c},m(s)}var l=n(219),p=n(828),_=n(397),x="__workerpool-terminate__",A=1e3;function g(){var s=i();if(!s)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return s}function o(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":m(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function i(){try{return _("worker_threads")}catch(s){if(m(s)==="object"&&s!==null&&s.code==="MODULE_NOT_FOUND")return null;throw s}}function a(){if(p.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var s=new Blob([n(670)],{type:"text/javascript"});return window.URL.createObjectURL(s)}else return __dirname+"/worker.js"}function f(s,c){if(c.workerType==="web")return o(),v(s,Worker);if(c.workerType==="thread")return t=g(),y(s,t);if(c.workerType==="process"||!c.workerType)return W(s,O(c),_("child_process"));if(p.platform==="browser")return o(),v(s,Worker);var t=i();return t?y(s,t):W(s,O(c),_("child_process"))}function v(s,c){var t=new c(s);return t.isBrowserWorker=!0,t.on=function(h,b){this.addEventListener(h,function(S){b(S.data)})},t.send=function(h){this.postMessage(h)},t}function y(s,c){var t=new c.Worker(s,{stdout:!1,stderr:!1});return t.isWorkerThread=!0,t.send=function(h){this.postMessage(h)},t.kill=function(){return this.terminate(),!0},t.disconnect=function(){this.terminate()},t}function W(s,c,t){var h=t.fork(s,c.forkArgs,c.forkOpts);return h.isChildProcess=!0,h}function O(s){s=s||{};var c=process.execArgv.join(" "),t=c.indexOf("--inspect")!==-1,h=c.indexOf("--debug-brk")!==-1,b=[];return t&&(b.push("--inspect="+s.debugPort),h&&b.push("--debug-brk")),process.execArgv.forEach(function(S){S.indexOf("--max-old-space-size")>-1&&b.push(S)}),Object.assign({},s,{forkArgs:s.forkArgs,forkOpts:Object.assign({},s.forkOpts,{execArgv:(s.forkOpts&&s.forkOpts.execArgv||[]).concat(b)})})}function M(s){for(var c=new Error(""),t=Object.keys(s),h=0;h<t.length;h++)c[t[h]]=s[t[h]];return c}function R(s,c){var t=this,h=c||{};this.script=s||a(),this.worker=f(this.script,h),this.debugPort=h.debugPort,this.forkOpts=h.forkOpts,this.forkArgs=h.forkArgs,s||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(w){if(!t.terminated)if(typeof w=="string"&&w==="ready")t.worker.ready=!0,S();else{var E=w.id,T=t.processing[E];T!==void 0&&(w.isEvent?T.options&&typeof T.options.on=="function"&&T.options.on(w.payload):(delete t.processing[E],t.terminating===!0&&t.terminate(),w.error?T.resolver.reject(M(w.error)):T.resolver.resolve(w.result)))}});function b(w){t.terminated=!0;for(var E in t.processing)t.processing[E]!==void 0&&t.processing[E].resolver.reject(w);t.processing=Object.create(null)}function S(){var w=u(t.requestQueue.splice(0)),E;try{for(w.s();!(E=w.n()).done;){var T=E.value;t.worker.send(T)}}catch(D){w.e(D)}finally{w.f()}}var P=this.worker;this.worker.on("error",b),this.worker.on("exit",function(w,E){var T=`Workerpool Worker terminated Unexpectedly
`;T+="    exitCode: `"+w+"`\n",T+="    signalCode: `"+E+"`\n",T+="    workerpool.script: `"+t.script+"`\n",T+="    spawnArgs: `"+P.spawnargs+"`\n",T+="    spawnfile: `"+P.spawnfile+"`\n",T+="    stdout: `"+P.stdout+"`\n",T+="    stderr: `"+P.stderr+"`\n",b(new Error(T))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}R.prototype.methods=function(){return this.exec("methods")},R.prototype.exec=function(s,c,t,h){t||(t=l.defer());var b=++this.lastId;this.processing[b]={id:b,resolver:t,options:h};var S={id:b,method:s,params:c};this.terminated?t.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(S):this.requestQueue.push(S);var P=this;return t.promise.catch(function(w){if(w instanceof l.CancellationError||w instanceof l.TimeoutError)return delete P.processing[b],P.terminateAndNotify(!0).then(function(){throw w},function(E){throw E});throw w})},R.prototype.busy=function(){return Object.keys(this.processing).length>0},R.prototype.terminate=function(s,c){var t=this;if(s){for(var h in this.processing)this.processing[h]!==void 0&&this.processing[h].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof c=="function"&&(this.terminationHandler=c),this.busy())this.terminating=!0;else{var b=function(w){if(t.terminated=!0,t.worker!=null&&t.worker.removeAllListeners&&t.worker.removeAllListeners("message"),t.worker=null,t.terminating=!1,t.terminationHandler)t.terminationHandler(w,t);else if(w)throw w};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){b(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var S=setTimeout(function(){t.worker&&t.worker.kill()},A);this.worker.once("exit",function(){clearTimeout(S),t.worker&&(t.worker.killed=!0),b()}),this.worker.ready?this.worker.send(x):this.worker.requestQueue.push(x)}else this.worker.kill(),this.worker.killed=!0,b();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");b()}},R.prototype.terminateAndNotify=function(s,c){var t=l.defer();return c&&(t.promise.timeout=c),this.terminate(s,function(h,b){h?t.reject(h):t.resolve(b)}),t.promise},e.exports=R,e.exports._tryRequireWorkerThreads=i,e.exports._setupProcessWorker=W,e.exports._setupBrowserWorker=v,e.exports._setupWorkerThreadWorker=y,e.exports.ensureWorkerThreads=g},833:function(e){"use strict";var r=65535;e.exports=n;function n(){this.ports=Object.create(null),this.length=0}n.prototype.nextAvailableStartingAt=function(u){for(;this.ports[u]===!0;)u++;if(u>=r)throw new Error("WorkerPool debug port limit reached: "+u+">= "+r);return this.ports[u]=!0,this.length++,u},n.prototype.releasePort=function(u){delete this.ports[u],this.length--}},828:function(e,r,n){var u=n(397),k=function(p){return typeof p<"u"&&p.versions!=null&&p.versions.node!=null};e.exports.isNode=k,e.exports.platform=typeof process<"u"&&k(process)?"node":"browser";var d=m("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!d||d.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:u("os").cpus().length;function m(l){try{return u(l)}catch{return null}}},670:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},397:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},744:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,r){addEventListener(e,function(n){r(n.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(r,n){return Object.defineProperty(r,n,{value:e[n],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(r,n){var u=new Function("return ("+r+").apply(null, arguments);");return u.apply(u,n)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(r){currentRequestId=e.id;var n=r.apply(r,e.params);isPromise(n)?n.then(function(u){worker.send({id:e.id,result:u,error:null}),currentRequestId=null}).catch(function(u){worker.send({id:e.id,result:null,error:convertError(u)}),currentRequestId=null}):(worker.send({id:e.id,result:n,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(u){worker.send({id:e.id,result:null,error:convertError(u)})}}),worker.register=function(e){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(r!==void 0)return r.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](n,n.exports,__webpack_require__),n.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__,r=__webpack_require__(828);e.pool=function(u,k){var d=__webpack_require__(345);return new d(u,k)},e.worker=function(u){var k=__webpack_require__(744);k.add(u)},e.workerEmit=function(u){var k=__webpack_require__(744);k.emit(u)},e.Promise=__webpack_require__(219),e.platform=r.platform,e.isMainThread=r.isMainThread,e.cpus=r.cpus}(),__webpack_exports__}()});const easings=[function e(r,n=.65){const u=1-n;if(r===0||r===1)return r;const k=r*2,d=k-1,m=u/(2*Math.PI)*Math.asin(1);return k<1?-.5*(Math.pow(2,10*d)*Math.sin((d-m)*(2*Math.PI)/u)):Math.pow(2,-10*d)*Math.sin((d-m)*(2*Math.PI)/u)*.5+1},function e(r){const n=r/1;if(n<1/2.75)return 7.5625*n*n;if(n<2/2.75){const u=n-.5454545454545454;return 7.5625*u*u+.75}else if(n<2.5/2.75){const u=n-.8181818181818182;return 7.5625*u*u+.9375}else{const u=n-.9545454545454546;return 7.5625*u*u+.984375}},function e(r){const n=r-1;return n*n*n+1},function e(r,n=1.70158){const u=r/1-1;return u*u*((n+1)*u+n)+1}];function ease(e,...r){return easings[e](...r)}function easeOutBounce(e){const r=e/1;if(r<1/2.75)return 7.5625*r*r;if(r<2/2.75){const n=r-.5454545454545454;return 7.5625*n*n+.75}else if(r<2.5/2.75){const n=r-.8181818181818182;return 7.5625*n*n+.9375}else{const n=r-.9545454545454546;return 7.5625*n*n+.984375}}function easeInBounce(e){return 1-easeOutBounce(1-e)}const DEFAULT_DISPLACEMENT=20;let desiredPoints,iterations,actualPoints,base,powerOf2Plus1;function getRandom(e,r){return Math.random()*(r-e)+e}function getEasingStep(e){const r=1/iterations;return e*r}function setupAlgorithm(){iterations=Math.floor(Math.log(desiredPoints*2-1)/Math.log(2)),powerOf2Plus1=2**iterations+1,actualPoints=desiredPoints+(desiredPoints%2?1:0)}function setTotalSamples(e){e!==desiredPoints&&(desiredPoints=e,setupAlgorithm())}function generateDataSeries(e,r=getRandom(0,50),n=getRandom(50,100),u=1,k=null,d=.5,m,l,p){l=typeof l<"u"?l:getRandom(r,n),p=typeof p<"u"?p:getRandom(r,n),typeof e=="number"&&setTotalSamples(e);let _=k=="function"&&k(l,p)||typeof k=="number"&&k||(l+p)/2||l-p||DEFAULT_DISPLACEMENT,x=_;const A=!!easings[m];let g=1;const o=new Array(actualPoints).fill(0);for(o[0]=l;g<=iterations;){const i=~~(powerOf2Plus1/2**g),a=2**g-1;for(let f=i;f<=a*i&&!(f>actualPoints-1);f+=i*2){const v=o[f-i];let y=o[f+i];typeof y>"u"&&(y=p);let W=(v+y)/2;const O=Math.random()<d;o[f]=O?Math.min(n,W+_):Math.max(r,W-_),l===p&&g===1&&(o[f]=W)}A?_=(1-ease(m,getEasingStep(g)))*x:_=_*2**-u,g++}return{data:o,dataMin:r,dataMax:n}}function punchHolesInArray(e,r){const k=.2*e.length,d=(30+10)/100*e.length,m=10,l=m/100*e.length,p=20,x=(100-30)/(30/m)/100*e.length*.9,A=()=>Math.round(getRandom(l-p/100*l,l+p/100*l)),g=()=>Math.round(getRandom(x-p/100*x,x+p/100*x));let o=!0;const i=Math.round(getRandom(k,d));let a=0,f=0;for(;a<i&&f<=e.length;){if(o){const v=g(),y=f+v>e.length?e.length-f:v;f=f+y,o=!1}else{const v=A();let y=Math.min(f+v>e.length?e.length-f:v,i-a);if(typeof r>"u"){const W=e[f-1],M=(e[f+y+1]-W)/y;e.splice(f,y,...[...new Array(y)].map((R,s)=>W+M*s))}else e.splice(f,y,...new Array(y).fill(NaN));a+=y,f+=y,o=!0}if(a>=e.length||f>=e.length)break}return e}function generatePunchedDataSeries(...e){const{data:r,dataMin:n,dataMax:u}=generateDataSeries(...e);return{data:punchHolesInArray(r),dataMin:n,dataMax:u}}function limitArray(e,r,n,u=1){return r=1/0,n=-1/0,{data:e.map(k=>(r=Math.min(r,k),n=Math.max(n,k),k*(1-u))),dataMin:r,dataMax:n}}const DATA_GENERATOR_TASKS={generateDataSeries:"generateDataSeries",generatePunchedDataSeries:"generatePunchedDataSeries",limitArray:"limitArray",setTotalSamples:"setTotalSamples"};function getDataTaskConfig(e,r){return{name:DATA_GENERATOR_TASKS.generateDataSeries,data:{channel:e,samples:r}}}function getPunchedDataTaskConfig(e,r){return{name:DATA_GENERATOR_TASKS.generatePunchedDataSeries,data:{channel:e,samples:r}}}function getLimitArrayTaskConfig(e,r,n){return{name:DATA_GENERATOR_TASKS.limitArray,data:{channel:e,channelData:r,limitFactor:n}}}workerpool.worker({[DATA_GENERATOR_TASKS.generateDataSeries]:e=>generateDataSeries(e.samples,e.channel.dataMin,e.channel.dataMax,e.channel.smoothing,e.channel.displacement,e.channel.displacementRatio,e.channel.easingType,e.channel.start,e.channel.end),[DATA_GENERATOR_TASKS.generatePunchedDataSeries]:e=>generatePunchedDataSeries(e.samples,e.channel.dataMin,e.channel.dataMax,e.channel.smoothing,e.channel.displacement,e.channel.displacementRatio,e.channel.easingType,e.channel.start,e.channel.end),[DATA_GENERATOR_TASKS.setTotalSamples]:e=>{setTotalSamples(e.samples)},[DATA_GENERATOR_TASKS.limitArray]:e=>limitArray(e.channelData,e.dataMin,e.dataMax,e.limitFactor)});
