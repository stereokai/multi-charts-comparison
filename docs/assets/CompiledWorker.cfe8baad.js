/**
 * workerpool.js
 * https://github.com/josdejong/workerpool
 *
 * Offload tasks to a pool of workers on node.js and in the browser.
 *
 * @version 6.2.1
 * @date    2022-04-11
 *
 * @license
 * Copyright (C) 2014-2022 Jos de Jong <wjosdejong@gmail.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */(function(r,t){typeof exports=="object"&&typeof module=="object"?module.exports=t():typeof define=="function"&&define.amd?define("workerpool",[],t):typeof exports=="object"?exports.workerpool=t():r.workerpool=t()})(typeof self<"u"?self:this,function(){return function(){var __webpack_modules__={345:function(e,r,t){var a=t(219),d=t(751),h=t(828),m=t(833),l=new m;function p(o,i){typeof o=="string"?this.script=o||null:(this.script=null,i=o),this.workers=[],this.tasks=[],i=i||{},this.forkArgs=Object.freeze(i.forkArgs||[]),this.forkOpts=Object.freeze(i.forkOpts||{}),this.debugPortStart=i.debugPortStart||43210,this.nodeWorker=i.nodeWorker,this.workerType=i.workerType||i.nodeWorker||"auto",this.maxQueueSize=i.maxQueueSize||1/0,this.onCreateWorker=i.onCreateWorker||function(){return null},this.onTerminateWorker=i.onTerminateWorker||function(){return null},i&&"maxWorkers"in i?(y(i.maxWorkers),this.maxWorkers=i.maxWorkers):this.maxWorkers=Math.max((h.cpus||4)-1,1),i&&"minWorkers"in i&&(i.minWorkers==="max"?this.minWorkers=this.maxWorkers:(E(i.minWorkers),this.minWorkers=i.minWorkers,this.maxWorkers=Math.max(this.minWorkers,this.maxWorkers)),this._ensureMinWorkers()),this._boundNext=this._next.bind(this),this.workerType==="thread"&&d.ensureWorkerThreads()}p.prototype.exec=function(o,i,c){if(i&&!Array.isArray(i))throw new TypeError('Array expected as argument "params"');if(typeof o=="string"){var u=a.defer();if(this.tasks.length>=this.maxQueueSize)throw new Error("Max queue size of "+this.maxQueueSize+" reached");var v=this.tasks,_={method:o,params:i,resolver:u,timeout:null,options:c};v.push(_);var x=u.promise.timeout;return u.promise.timeout=function(D){return v.indexOf(_)!==-1?(_.timeout=D,u.promise):x.call(u.promise,D)},this._next(),u.promise}else{if(typeof o=="function")return this.exec("run",[String(o),i]);throw new TypeError('Function or string expected as argument "method"')}},p.prototype.proxy=function(){if(arguments.length>0)throw new Error("No arguments expected");var o=this;return this.exec("methods").then(function(i){var c={};return i.forEach(function(u){c[u]=function(){return o.exec(u,Array.prototype.slice.call(arguments))}}),c})},p.prototype._next=function(){if(this.tasks.length>0){var o=this._getWorker();if(o){var i=this,c=this.tasks.shift();if(c.resolver.promise.pending){var u=o.exec(c.method,c.params,c.resolver,c.options).then(i._boundNext).catch(function(){if(o.terminated)return i._removeWorker(o)}).then(function(){i._next()});typeof c.timeout=="number"&&u.timeout(c.timeout)}else i._next()}}},p.prototype._getWorker=function(){for(var o=this.workers,i=0;i<o.length;i++){var c=o[i];if(c.busy()===!1)return c}return o.length<this.maxWorkers?(c=this._createWorkerHandler(),o.push(c),c):null},p.prototype._removeWorker=function(o){var i=this;return l.releasePort(o.debugPort),this._removeWorkerFromList(o),this._ensureMinWorkers(),new a(function(c,u){o.terminate(!1,function(v){i.onTerminateWorker({forkArgs:o.forkArgs,forkOpts:o.forkOpts,script:o.script}),v?u(v):c(o)})})},p.prototype._removeWorkerFromList=function(o){var i=this.workers.indexOf(o);i!==-1&&this.workers.splice(i,1)},p.prototype.terminate=function(o,i){var c=this;this.tasks.forEach(function(O){O.resolver.reject(new Error("Pool terminated"))}),this.tasks.length=0;var u=function(D){this._removeWorkerFromList(D)},v=u.bind(this),_=[],x=this.workers.slice();return x.forEach(function(O){var D=O.terminateAndNotify(o,i).then(v).always(function(){c.onTerminateWorker({forkArgs:O.forkArgs,forkOpts:O.forkOpts,script:O.script})});_.push(D)}),a.all(_)},p.prototype.stats=function(){var o=this.workers.length,i=this.workers.filter(function(c){return c.busy()}).length;return{totalWorkers:o,busyWorkers:i,idleWorkers:o-i,pendingTasks:this.tasks.length,activeTasks:i}},p.prototype._ensureMinWorkers=function(){if(this.minWorkers)for(var o=this.workers.length;o<this.minWorkers;o++)this.workers.push(this._createWorkerHandler())},p.prototype._createWorkerHandler=function(){var o=this.onCreateWorker({forkArgs:this.forkArgs,forkOpts:this.forkOpts,script:this.script})||{};return new d(o.script||this.script,{forkArgs:o.forkArgs||this.forkArgs,forkOpts:o.forkOpts||this.forkOpts,debugPort:l.nextAvailableStartingAt(this.debugPortStart),workerType:this.workerType})};function y(o){if(!W(o)||!g(o)||o<1)throw new TypeError("Option maxWorkers must be an integer number >= 1")}function E(o){if(!W(o)||!g(o)||o<0)throw new TypeError("Option minWorkers must be an integer number >= 0")}function W(o){return typeof o=="number"}function g(o){return Math.round(o)==o}e.exports=p},219:function(e){"use strict";function r(h,m){var l=this;if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(typeof h!="function")throw new SyntaxError("Function parameter handler(resolve, reject) missing");var p=[],y=[];this.resolved=!1,this.rejected=!1,this.pending=!0;var E=function(i,c){p.push(i),y.push(c)};this.then=function(o,i){return new r(function(c,u){var v=o?t(o,c,u):c,_=i?t(i,c,u):u;E(v,_)},l)};var W=function(i){return l.resolved=!0,l.rejected=!1,l.pending=!1,p.forEach(function(c){c(i)}),E=function(u,v){u(i)},W=g=function(){},l},g=function(i){return l.resolved=!1,l.rejected=!0,l.pending=!1,y.forEach(function(c){c(i)}),E=function(u,v){v(i)},W=g=function(){},l};this.cancel=function(){return m?m.cancel():g(new a),l},this.timeout=function(o){if(m)m.timeout(o);else{var i=setTimeout(function(){g(new d("Promise timed out after "+o+" ms"))},o);l.always(function(){clearTimeout(i)})}return l},h(function(o){W(o)},function(o){g(o)})}function t(h,m,l){return function(p){try{var y=h(p);y&&typeof y.then=="function"&&typeof y.catch=="function"?y.then(m,l):m(y)}catch(E){l(E)}}}r.prototype.catch=function(h){return this.then(null,h)},r.prototype.always=function(h){return this.then(h,h)},r.all=function(h){return new r(function(m,l){var p=h.length,y=[];p?h.forEach(function(E,W){E.then(function(g){y[W]=g,p--,p==0&&m(y)},function(g){p=0,l(g)})}):m(y)})},r.defer=function(){var h={};return h.promise=new r(function(m,l){h.resolve=m,h.reject=l}),h};function a(h){this.message=h||"promise cancelled",this.stack=new Error().stack}a.prototype=new Error,a.prototype.constructor=Error,a.prototype.name="CancellationError",r.CancellationError=a;function d(h){this.message=h||"timeout exceeded",this.stack=new Error().stack}d.prototype=new Error,d.prototype.constructor=Error,d.prototype.name="TimeoutError",r.TimeoutError=d,e.exports=r},751:function(e,r,t){"use strict";function a(s,f){var n=typeof Symbol<"u"&&s[Symbol.iterator]||s["@@iterator"];if(!n){if(Array.isArray(s)||(n=d(s))||f&&s&&typeof s.length=="number"){n&&(s=n);var k=0,A=function(){};return{s:A,n:function(){return k>=s.length?{done:!0}:{done:!1,value:s[k++]}},e:function(T){throw T},f:A}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var R=!0,P=!1,w;return{s:function(){n=n.call(s)},n:function(){var T=n.next();return R=T.done,T},e:function(T){P=!0,w=T},f:function(){try{!R&&n.return!=null&&n.return()}finally{if(P)throw w}}}}function d(s,f){if(!!s){if(typeof s=="string")return h(s,f);var n=Object.prototype.toString.call(s).slice(8,-1);if(n==="Object"&&s.constructor&&(n=s.constructor.name),n==="Map"||n==="Set")return Array.from(s);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(s,f)}}function h(s,f){(f==null||f>s.length)&&(f=s.length);for(var n=0,k=new Array(f);n<f;n++)k[n]=s[n];return k}function m(s){return m=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},m(s)}var l=t(219),p=t(828),y=t(397),E="__workerpool-terminate__",W=1e3;function g(){var s=i();if(!s)throw new Error("WorkerPool: workerType = 'thread' is not supported, Node >= 11.7.0 required");return s}function o(){if(typeof Worker!="function"&&((typeof Worker>"u"?"undefined":m(Worker))!=="object"||typeof Worker.prototype.constructor!="function"))throw new Error("WorkerPool: Web Workers not supported")}function i(){try{return y("worker_threads")}catch(s){if(m(s)==="object"&&s!==null&&s.code==="MODULE_NOT_FOUND")return null;throw s}}function c(){if(p.platform==="browser"){if(typeof Blob>"u")throw new Error("Blob not supported by the browser");if(!window.URL||typeof window.URL.createObjectURL!="function")throw new Error("URL.createObjectURL not supported by the browser");var s=new Blob([t(670)],{type:"text/javascript"});return window.URL.createObjectURL(s)}else return __dirname+"/worker.js"}function u(s,f){if(f.workerType==="web")return o(),v(s,Worker);if(f.workerType==="thread")return n=g(),_(s,n);if(f.workerType==="process"||!f.workerType)return x(s,O(f),y("child_process"));if(p.platform==="browser")return o(),v(s,Worker);var n=i();return n?_(s,n):x(s,O(f),y("child_process"))}function v(s,f){var n=new f(s);return n.isBrowserWorker=!0,n.on=function(k,A){this.addEventListener(k,function(R){A(R.data)})},n.send=function(k){this.postMessage(k)},n}function _(s,f){var n=new f.Worker(s,{stdout:!1,stderr:!1});return n.isWorkerThread=!0,n.send=function(k){this.postMessage(k)},n.kill=function(){return this.terminate(),!0},n.disconnect=function(){this.terminate()},n}function x(s,f,n){var k=n.fork(s,f.forkArgs,f.forkOpts);return k.isChildProcess=!0,k}function O(s){s=s||{};var f=process.execArgv.join(" "),n=f.indexOf("--inspect")!==-1,k=f.indexOf("--debug-brk")!==-1,A=[];return n&&(A.push("--inspect="+s.debugPort),k&&A.push("--debug-brk")),process.execArgv.forEach(function(R){R.indexOf("--max-old-space-size")>-1&&A.push(R)}),Object.assign({},s,{forkArgs:s.forkArgs,forkOpts:Object.assign({},s.forkOpts,{execArgv:(s.forkOpts&&s.forkOpts.execArgv||[]).concat(A)})})}function D(s){for(var f=new Error(""),n=Object.keys(s),k=0;k<n.length;k++)f[n[k]]=s[n[k]];return f}function M(s,f){var n=this,k=f||{};this.script=s||c(),this.worker=u(this.script,k),this.debugPort=k.debugPort,this.forkOpts=k.forkOpts,this.forkArgs=k.forkArgs,s||(this.worker.ready=!0),this.requestQueue=[],this.worker.on("message",function(w){if(!n.terminated)if(typeof w=="string"&&w==="ready")n.worker.ready=!0,R();else{var b=w.id,T=n.processing[b];T!==void 0&&(w.isEvent?T.options&&typeof T.options.on=="function"&&T.options.on(w.payload):(delete n.processing[b],n.terminating===!0&&n.terminate(),w.error?T.resolver.reject(D(w.error)):T.resolver.resolve(w.result)))}});function A(w){n.terminated=!0;for(var b in n.processing)n.processing[b]!==void 0&&n.processing[b].resolver.reject(w);n.processing=Object.create(null)}function R(){var w=a(n.requestQueue.splice(0)),b;try{for(w.s();!(b=w.n()).done;){var T=b.value;n.worker.send(T)}}catch(S){w.e(S)}finally{w.f()}}var P=this.worker;this.worker.on("error",A),this.worker.on("exit",function(w,b){var T=`Workerpool Worker terminated Unexpectedly
`;T+="    exitCode: `"+w+"`\n",T+="    signalCode: `"+b+"`\n",T+="    workerpool.script: `"+n.script+"`\n",T+="    spawnArgs: `"+P.spawnargs+"`\n",T+="    spawnfile: `"+P.spawnfile+"`\n",T+="    stdout: `"+P.stdout+"`\n",T+="    stderr: `"+P.stderr+"`\n",A(new Error(T))}),this.processing=Object.create(null),this.terminating=!1,this.terminated=!1,this.terminationHandler=null,this.lastId=0}M.prototype.methods=function(){return this.exec("methods")},M.prototype.exec=function(s,f,n,k){n||(n=l.defer());var A=++this.lastId;this.processing[A]={id:A,resolver:n,options:k};var R={id:A,method:s,params:f};this.terminated?n.reject(new Error("Worker is terminated")):this.worker.ready?this.worker.send(R):this.requestQueue.push(R);var P=this;return n.promise.catch(function(w){if(w instanceof l.CancellationError||w instanceof l.TimeoutError)return delete P.processing[A],P.terminateAndNotify(!0).then(function(){throw w},function(b){throw b});throw w})},M.prototype.busy=function(){return Object.keys(this.processing).length>0},M.prototype.terminate=function(s,f){var n=this;if(s){for(var k in this.processing)this.processing[k]!==void 0&&this.processing[k].resolver.reject(new Error("Worker terminated"));this.processing=Object.create(null)}if(typeof f=="function"&&(this.terminationHandler=f),this.busy())this.terminating=!0;else{var A=function(w){if(n.terminated=!0,n.worker!=null&&n.worker.removeAllListeners&&n.worker.removeAllListeners("message"),n.worker=null,n.terminating=!1,n.terminationHandler)n.terminationHandler(w,n);else if(w)throw w};if(this.worker)if(typeof this.worker.kill=="function"){if(this.worker.killed){A(new Error("worker already killed!"));return}if(this.worker.isChildProcess){var R=setTimeout(function(){n.worker&&n.worker.kill()},W);this.worker.once("exit",function(){clearTimeout(R),n.worker&&(n.worker.killed=!0),A()}),this.worker.ready?this.worker.send(E):this.requestQueue.push(E)}else this.worker.kill(),this.worker.killed=!0,A();return}else if(typeof this.worker.terminate=="function")this.worker.terminate(),this.worker.killed=!0;else throw new Error("Failed to terminate worker");A()}},M.prototype.terminateAndNotify=function(s,f){var n=l.defer();return f&&(n.promise.timeout=f),this.terminate(s,function(k,A){k?n.reject(k):n.resolve(A)}),n.promise},e.exports=M,e.exports._tryRequireWorkerThreads=i,e.exports._setupProcessWorker=x,e.exports._setupBrowserWorker=v,e.exports._setupWorkerThreadWorker=_,e.exports.ensureWorkerThreads=g},833:function(e){"use strict";var r=65535;e.exports=t;function t(){this.ports=Object.create(null),this.length=0}t.prototype.nextAvailableStartingAt=function(a){for(;this.ports[a]===!0;)a++;if(a>=r)throw new Error("WorkerPool debug port limit reached: "+a+">= "+r);return this.ports[a]=!0,this.length++,a},t.prototype.releasePort=function(a){delete this.ports[a],this.length--}},828:function(e,r,t){var a=t(397),d=function(p){return typeof p<"u"&&p.versions!=null&&p.versions.node!=null};e.exports.isNode=d,e.exports.platform=typeof process<"u"&&d(process)?"node":"browser";var h=m("worker_threads");e.exports.isMainThread=e.exports.platform==="node"?(!h||h.isMainThread)&&!process.connected:typeof Window<"u",e.exports.cpus=e.exports.platform==="browser"?self.navigator.hardwareConcurrency:a("os").cpus().length;function m(l){try{return a(l)}catch{return null}}},670:function(e){e.exports=`!function(){var __webpack_exports__={};!function(){var exports=__webpack_exports__,__webpack_unused_export__;function _typeof(r){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r})(r)}var requireFoolWebpack=eval("typeof require !== 'undefined' ? require : function (module) { throw new Error('Module \\" + module + \\" not found.') }"),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function(){}},WorkerThreads,parentPort;if("undefined"!=typeof self&&"function"==typeof postMessage&&"function"==typeof addEventListener)worker.on=function(r,e){addEventListener(r,function(r){e(r.data)})},worker.send=function(r){postMessage(r)};else{if("undefined"==typeof process)throw new Error("Script must be executed as a worker");try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(error){if("object"!==_typeof(error)||null===error||"MODULE_NOT_FOUND"!==error.code)throw error}WorkerThreads&&null!==WorkerThreads.parentPort?(parentPort=WorkerThreads.parentPort,worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)):(worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process))}function convertError(o){return Object.getOwnPropertyNames(o).reduce(function(r,e){return Object.defineProperty(r,e,{value:o[e],enumerable:!0})},{})}function isPromise(r){return r&&"function"==typeof r.then&&"function"==typeof r.catch}worker.methods={},worker.methods.run=function(r,e){r=new Function("return ("+r+").apply(null, arguments);");return r.apply(r,e)},worker.methods.methods=function(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(!r)throw new Error('Unknown method "'+e.method+'"');currentRequestId=e.id;var o=r.apply(r,e.params);isPromise(o)?o.then(function(r){worker.send({id:e.id,result:r,error:null}),currentRequestId=null}).catch(function(r){worker.send({id:e.id,result:null,error:convertError(r)}),currentRequestId=null}):(worker.send({id:e.id,result:o,error:null}),currentRequestId=null)}catch(r){worker.send({id:e.id,result:null,error:convertError(r)})}}),worker.register=function(r){if(r)for(var e in r)r.hasOwnProperty(e)&&(worker.methods[e]=r[e]);worker.send("ready")},worker.emit=function(r){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:r})},__webpack_unused_export__=worker.register,worker.emit}()}();`},397:function(module){var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`);module.exports=requireFoolWebpack},744:function(__unused_webpack_module,exports){function _typeof(e){return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},_typeof(e)}var requireFoolWebpack=eval(`typeof require !== 'undefined' ? require : function (module) { throw new Error('Module " + module + " not found.') }`),TERMINATE_METHOD_ID="__workerpool-terminate__",worker={exit:function e(){}};if(typeof self<"u"&&typeof postMessage=="function"&&typeof addEventListener=="function")worker.on=function(e,r){addEventListener(e,function(t){r(t.data)})},worker.send=function(e){postMessage(e)};else if(typeof process<"u"){var WorkerThreads;try{WorkerThreads=requireFoolWebpack("worker_threads")}catch(e){if(!(_typeof(e)==="object"&&e!==null&&e.code==="MODULE_NOT_FOUND"))throw e}if(WorkerThreads&&WorkerThreads.parentPort!==null){var parentPort=WorkerThreads.parentPort;worker.send=parentPort.postMessage.bind(parentPort),worker.on=parentPort.on.bind(parentPort)}else worker.on=process.on.bind(process),worker.send=process.send.bind(process),worker.on("disconnect",function(){process.exit(1)}),worker.exit=process.exit.bind(process)}else throw new Error("Script must be executed as a worker");function convertError(e){return Object.getOwnPropertyNames(e).reduce(function(r,t){return Object.defineProperty(r,t,{value:e[t],enumerable:!0})},{})}function isPromise(e){return e&&typeof e.then=="function"&&typeof e.catch=="function"}worker.methods={},worker.methods.run=function e(r,t){var a=new Function("return ("+r+").apply(null, arguments);");return a.apply(a,t)},worker.methods.methods=function e(){return Object.keys(worker.methods)};var currentRequestId=null;worker.on("message",function(e){if(e===TERMINATE_METHOD_ID)return worker.exit(0);try{var r=worker.methods[e.method];if(r){currentRequestId=e.id;var t=r.apply(r,e.params);isPromise(t)?t.then(function(a){worker.send({id:e.id,result:a,error:null}),currentRequestId=null}).catch(function(a){worker.send({id:e.id,result:null,error:convertError(a)}),currentRequestId=null}):(worker.send({id:e.id,result:t,error:null}),currentRequestId=null)}else throw new Error('Unknown method "'+e.method+'"')}catch(a){worker.send({id:e.id,result:null,error:convertError(a)})}}),worker.register=function(e){if(e)for(var r in e)e.hasOwnProperty(r)&&(worker.methods[r]=e[r]);worker.send("ready")},worker.emit=function(e){currentRequestId&&worker.send({id:currentRequestId,isEvent:!0,payload:e})},exports.add=worker.register,exports.emit=worker.emit}},__webpack_module_cache__={};function __webpack_require__(e){var r=__webpack_module_cache__[e];if(r!==void 0)return r.exports;var t=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](t,t.exports,__webpack_require__),t.exports}var __webpack_exports__={};return function(){var e=__webpack_exports__,r=__webpack_require__(828);e.pool=function(a,d){var h=__webpack_require__(345);return new h(a,d)},e.worker=function(a){var d=__webpack_require__(744);d.add(a)},e.workerEmit=function(a){var d=__webpack_require__(744);d.emit(a)},e.Promise=__webpack_require__(219),e.platform=r.platform,e.isMainThread=r.isMainThread,e.cpus=r.cpus}(),__webpack_exports__}()});const easings=[function e(r,t=.65){const a=1-t;if(r===0||r===1)return r;const d=r*2,h=d-1,m=a/(2*Math.PI)*Math.asin(1);return d<1?-.5*(Math.pow(2,10*h)*Math.sin((h-m)*(2*Math.PI)/a)):Math.pow(2,-10*h)*Math.sin((h-m)*(2*Math.PI)/a)*.5+1},function e(r){const t=r/1;if(t<1/2.75)return 7.5625*t*t;if(t<2/2.75){const a=t-.5454545454545454;return 7.5625*a*a+.75}else if(t<2.5/2.75){const a=t-.8181818181818182;return 7.5625*a*a+.9375}else{const a=t-.9545454545454546;return 7.5625*a*a+.984375}},function e(r){const t=r-1;return t*t*t+1},function e(r,t=1.70158){const a=r/1-1;return a*a*((t+1)*a+t)+1}];function ease(e,...r){return easings[e](...r)}function easeOutBounce(e){const r=e/1;if(r<1/2.75)return 7.5625*r*r;if(r<2/2.75){const t=r-.5454545454545454;return 7.5625*t*t+.75}else if(r<2.5/2.75){const t=r-.8181818181818182;return 7.5625*t*t+.9375}else{const t=r-.9545454545454546;return 7.5625*t*t+.984375}}function easeInBounce(e){return 1-easeOutBounce(1-e)}const DEFAULT_DISPLACEMENT=20;let desiredPoints,iterations,actualPoints,base,powerOf2Plus1;function getRandom(e,r){return Math.random()*(r-e)+e}function getEasingStep(e){const r=1/iterations;return e*r}function setupAlgorithm(){iterations=Math.floor(Math.log(desiredPoints*2-1)/Math.log(2)),powerOf2Plus1=2**iterations+1,actualPoints=desiredPoints+(desiredPoints%2?1:0)}function setTotalSamples(e){e!==desiredPoints&&(desiredPoints=e,setupAlgorithm())}function generateDataSeries(e,r=getRandom(0,50),t=getRandom(50,100),a=1,d=null,h=.5,m,l,p){l=typeof l<"u"?l:getRandom(r,t),p=typeof p<"u"?p:getRandom(r,t),typeof e=="number"&&setTotalSamples(e);let y=d=="function"&&d(l,p)||typeof d=="number"&&d||(l+p)/2||l-p||DEFAULT_DISPLACEMENT,E=y;const W=!!easings[m];let g=1;const o=new Array(actualPoints).fill(0);for(o[0]=l;g<=iterations;){const i=~~(powerOf2Plus1/2**g),c=2**g-1;for(let u=i;u<=c*i&&!(u>actualPoints-1);u+=i*2){const v=o[u-i];let _=o[u+i];typeof _>"u"&&(_=p);let x=(v+_)/2;const O=Math.random()<h;o[u]=O?Math.min(t,x+y):Math.max(r,x-y),l===p&&g===1&&(o[u]=x)}W?y=(1-ease(m,getEasingStep(g)))*E:y=y*2**-a,g++}return{data:o,dataMin:r,dataMax:t}}function punchHolesInArray(e,r){const d=.2*e.length,h=(30+10)/100*e.length,m=10,l=m/100*e.length,p=20,E=(100-30)/(30/m)/100*e.length*.9,W=()=>Math.round(getRandom(l-p/100*l,l+p/100*l)),g=()=>Math.round(getRandom(E-p/100*E,E+p/100*E));let o=!0;const i=Math.round(getRandom(d,h));let c=0,u=0;for(;c<i&&u<=e.length;){if(o){const v=g(),_=u+v>e.length?e.length-u:v;u=u+_,o=!1}else{const v=W();let _=Math.min(u+v>e.length?e.length-u:v,i-c);if(typeof r>"u"){const x=e[u-1],D=(e[u+_+1]-x)/_;for(let M=u;M<u+_;M++)e[M]=x+D*M}else for(let x=u;x<u+_;x++)e[x]=r;c+=_,u+=_,o=!0}if(c>=e.length||u>=e.length)break}return e}function limitArray(e,r,t,a=1){r=1/0,t=-1/0;for(var d=0;d<e.length;d++)r=Math.min(r,e[d]),t=Math.max(t,e[d]),e[d]=e[d]*(1-a);return{data:e,dataMin:r,dataMax:t}}const DATA_GENERATOR={generateDataSeries:"generateDataSeries",generateDataWithExtrapolations:"generateDataWithExtrapolations",limitArray:"limitArray",punchHolesInArray:"punchHolesInArray",setTotalSamples:"setTotalSamples",generateAndTransformData:"generateAndTransformData",transformData:"transformData"};DATA_GENERATOR.getTaskConfig={[DATA_GENERATOR.generateDataSeries]:(e,r)=>({dataMin:e.dataMin,dataMax:e.dataMax,smoothing:e.smoothing,displacement:e.displacement,displacementRatio:e.displacementRatio,easingType:e.easingType,start:e.start,end:e.end,samples:r}),[DATA_GENERATOR.generateDataWithExtrapolations]:(e,r,t)=>({...DATA_GENERATOR.getTaskConfig[DATA_GENERATOR.generateDataSeries](e,r).data,replaceWith:t}),[DATA_GENERATOR.limitArray]:(e,r,t)=>({data:r,dataMin:e.dataMin,dataMax:e.dataMax,limitFactor:t}),[DATA_GENERATOR.punchHolesInArray]:(e,r)=>({data:e,replaceWith:r}),[DATA_GENERATOR.generateAndTransformData]:(e,r)=>({generate:e,transforms:r}),[DATA_GENERATOR.transformData]:(e,r)=>({channel:{...DATA_GENERATOR.getTaskConfig[DATA_GENERATOR.generateDataSeries](e).data,data:e.data},transforms:r})};for(const e in DATA_GENERATOR.getTaskConfig){const r=DATA_GENERATOR.getTaskConfig[e];DATA_GENERATOR.getTaskConfig[e]=(...t)=>({name:e,data:r(...t)})}const WorkerAPI={[DATA_GENERATOR.generateDataSeries]:e=>generateDataSeries(e.samples,e.dataMin,e.dataMax,e.smoothing,e.displacement,e.displacementRatio,e.easingType,e.start,e.end),[DATA_GENERATOR.generateDataWithExtrapolations]:e=>{const{data:r,dataMin:t,dataMax:a}=WorkerAPI[DATA_GENERATOR.generateDataSeries](e);return{data:WorkerAPI[DATA_GENERATOR.punchHolesInArray]({data:r,replaceWith:e.replaceWith}),dataMin:t,dataMax:a}},[DATA_GENERATOR.setTotalSamples]:e=>{setTotalSamples(e.samples)},[DATA_GENERATOR.limitArray]:e=>limitArray(e.data,e.dataMin,e.dataMax,e.limitFactor),[DATA_GENERATOR.punchHolesInArray]:e=>({data:punchHolesInArray(e.data,e.transform.replaceWith)}),[DATA_GENERATOR.transformData]:e=>({data,dataMin,dataMax}=e.transforms.reduce((r,t)=>{const a=WorkerAPI[t.name],d=a({...r,transform:t.data});return Array.isArray(d)?{...r,data:d}:{...r,...d}},e.channel)),[DATA_GENERATOR.generateAndTransformData]:e=>e.transforms&&e.transforms.length?WorkerAPI[DATA_GENERATOR.transformData]({channel:WorkerAPI[e.generate.name](e.generate.data),transforms:e.transforms}):WorkerAPI[e.generate.name](e.generate.data)};workerpool.worker(WorkerAPI);
